# nixpacks.toml

[phases.setup]
nixPkgs = ["python3"]  # install Python & pip via Nix

[phases.install]
commands = [
  "pip install crossroad-cli",  # pull your published CLI
]

[start]
# Command to start the FastAPI server using uvicorn.
# It runs the 'app' instance from the 'crossroad.api.main' module.
# '--host 0.0.0.0' makes it accessible from outside the container.
# '--port $PORT' uses the port provided by the deployment platform environment variable.
cmd = "uvicorn crossroad.api.main:app --host 0.0.0.0 --port $PORT --workers 1"