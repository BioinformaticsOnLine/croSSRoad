# nixpacks.toml

[phases.setup]
nixPkgs = ["python3"] # It's generally recommended to specify a Python version like python3

[phases.install]
# Activate the virtual environment created by the Python provider
# before running the pip install command.
commands = [
  ". /opt/venv/bin/activate && pip install crossroad-cli", # pull your published CLI
]

[start]
# Activate the virtual environment before starting the server
# to ensure uvicorn from the venv is used.
cmd = ". /opt/venv/bin/activate && uvicorn crossroad.api.main:app --host 0.0.0.0 --port $PORT --workers 1"